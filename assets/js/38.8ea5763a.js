(window.webpackJsonp=window.webpackJsonp||[]).push([[38],{494:function(e,n,t){"use strict";t.r(n);var s=t(60),r=Object(s.a)({},(function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h1",{attrs:{id:"ftdi-flash-probleme"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ftdi-flash-probleme"}},[e._v("#")]),e._v(" FTDI Flash-Probleme")]),e._v(" "),t("div",{staticClass:"language-text line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("avrdude: stk500_recv(): programmer is not responding\navrdude: stk500_getsync() attempt 1 of 10: not in sync: resp=0x00\navrdude: stk500_recv(): programmer is not responding\navrdude: stk500_getsync() attempt 2 of 10: not in sync: resp=0x00\navrdude: stk500_recv(): programmer is not responding\n...\navrdude: stk500_set_extended_parms(): protocol error, expect=0x14, resp=0x10\navrdude: stk500_initialize(): failed\navrdude: initialization failed, rc=-1\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br"),t("span",{staticClass:"line-number"},[e._v("3")]),t("br"),t("span",{staticClass:"line-number"},[e._v("4")]),t("br"),t("span",{staticClass:"line-number"},[e._v("5")]),t("br"),t("span",{staticClass:"line-number"},[e._v("6")]),t("br"),t("span",{staticClass:"line-number"},[e._v("7")]),t("br"),t("span",{staticClass:"line-number"},[e._v("8")]),t("br"),t("span",{staticClass:"line-number"},[e._v("9")]),t("br")])]),t("p",[e._v("Es kommt ab und an zu Problemen bei Upload/Flashen der Sketches über die UART-Schnittstelle (FTDI). Dies kann verschiedenste Ursachen haben:")]),e._v(" "),t("ul",[t("li",[e._v("Der FTDI ist falsch angeschlossen."),t("br"),e._v(" "),t("code",[e._v("TX")]),e._v(" (Senden) am AVR muss an "),t("code",[e._v("RX")]),e._v(" (Empfangen) am FTDI angeschlossen sein und umgekehrt.")]),e._v(" "),t("li",[e._v("Auf dem AVR muss ein entsprechender Bootloader (über "),t("RouterLink",{attrs:{to:"/Grundlagen/04-isp.html"}},[e._v("ISP")]),e._v(") geflasht sein um später per UART den eigentlichen Sketch flashen zu können. Ein Arduino Pro-Mini wird überlichweise mit einem Bootloader ausgeliefert.")],1),e._v(" "),t("li",[e._v("Der FTDI kann keinen RESET des AVR durchführen.\n"),t("code",[e._v("RESET")]),e._v(" Pin falsch angeschlossen oder es fehlt ein 100nF Kondensator in der Leitung. Ein Arduino Pro-Mini hat diesen on-board.")]),e._v(" "),t("li",[e._v("Der interne Takt des AVR ist zu ungenau, flashen per ISP geht."),t("br"),e._v("\nDieses Problem tritt vor allem auf, wenn kein externer 8Mhz Oszillator verbaut ist (der Pro-Mini hat einen on-board)."),t("br"),e._v("\nSiehe "),t("a",{attrs:{href:"https://cache.amobbs.com/bbs_upload782111/files_22/ourdev_508497.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("Baud-Error-Rates"),t("OutboundLink")],1),e._v(" "),t("ul",[t("li",[e._v("Als Lösung kann der Sketch per ISP geflasht werden, denn der SPI-Bus bringt ein eigenes Taktsignal mit. Sofern man nicht per FTDI flashen möchte ist kein Bootloader nötig.")]),e._v(" "),t("li",[e._v("Es kann ein Bootloader versucht werden, der andere Baudraten zum flashen erlaubt, z.B. eine Version des "),t("a",{attrs:{href:"https://github.com/svn2github/transistortester/blob/master/bootloaders/optiboot/optiboot_m328p_autoBaud_noLED.hex",target:"_blank",rel:"noopener noreferrer"}},[e._v("optiboot"),t("OutboundLink")],1),e._v(" mit "),t("em",[e._v("AutoBaud")]),e._v(". Beim Upload versucht man dann statt den üblichen 57600 Baud geringere Geschwindigkeiten wie 38400, 28800 oder noch weniger. Es empfiehlt sich im Sketch dann auch die niedrigere Baudrate für die serielle Konsole einzustellen z.B.:")])]),e._v(" "),t("div",{staticClass:"language-cpp line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-cpp"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// Init der seriellen Konsole mit 38400 Baud")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("DINIT")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("38400")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" ASKSIN_PLUS_PLUS_IDENTIFIER"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("`"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v("\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br")])])]),e._v(" "),t("li",[e._v("Mit dem ISP wurden die Fuses des AVR so geändert, dass er einen externen Takt erwartet, aber kein Quarz oder Resonator angeschlossen ist.\nDadurch kann der Bootloader nicht ausgeführt werden. Es muss zum Ändern der Fuses per ISP ein externer Takt angelegt werden. Der Diamex ISP unterstützt diese Funktion.")])])])}),[],!1,null,null,null);n.default=r.exports}}]);